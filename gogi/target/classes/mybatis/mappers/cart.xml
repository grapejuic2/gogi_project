<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.cart">

	<!-- 장바구니 테이블 추가 전에 해당 상품번호가 장바구니에 담겨있는지 조회 (장바구니 중복 담기 방지) -->
	<select id="selectCountInCart" resultType="String" parameterType="cartVO">
		<![CDATA[
			select decode(count(*),0,'false','true') from gogi_cart
			where goods_id=#{goods_id}
			and mem_id=#{mem_id}
		]]>
	</select>
	
	<!-- 상품추가 -->
	<insert id="insertGoodsInCart" parameterType="cartVO">
		<![CDATA[
			insert into gogi_cart(cart_no, goods_id, mem_id,cart_count,cart_time, delivery_option)
			values(#{cart_no}, #{goods_id}, #{mem_id},#{cart_count}, sysdate, #{delivery_option})
		]]>	
	</insert>
	
	<select id="selectMaxCartNo" resultType="int">
	    <![CDATA[
			select nvl(max(cart_no), 0) + 1 from gogi_cart 
    	]]>
	</select>
	
	<!-- 상품수정 -->
	<!-- 상품삭제 -->
</mapper>