<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.goods">

	<!-- goodsVO resultMap 정의 -->
	<resultMap id="goodsResult" type="goodsVO">
		<result property="goods_id" column="goods_id" />
		<result property="goods_sort" column="goods_sort" />
		<result property="goods_name" column="goods_name" />
		<result property="goods_seller" column="goods_seller" />
		<result property="goods_country" column="goods_country" />
		<result property="goods_price" column="goods_price" />
		<result property="goods_point" column="goods_point" />
		<result property="good_delivery_date" column="good_delivery_date" />
		<result property="goods_intro" column="goods_intro" />
		<result property="goods_status" column="goods_status" />
	</resultMap>
	
	<!-- imageFileVO resultMap 정의 -->
	<resultMap id="goodsImageResult" type="imageFileVO">
		<result property="image_id" column="image_id" />
		<result property="goods_id" column="goods_id" />
		<result property="file_name" column="file_name" />
		<result property="reg_id" column="reg_id" />
		<result property="file_type" column="file_type" />
		<result property="creDate" column="creDate" />
	</resultMap>
	
	<!--goods_status의 조건값으로 메인페이지 베스트 상품, 세일상품 조회  -->
	<select id="selectGoodsMainList" parameterType="String" resultMap="goodsResult">
		<![CDATA[
			 select t.*
          from(
			select g.*, d.fileName from gogi_goods g, gogi_goods_image d
        	where g.goods_id=d.goods_id 
        	and d.filetype='main_image'
        	and goods_status=#{goodsStatus}
            order by g.goods_creDate desc)  t
		]]>
	</select>

</mapper>