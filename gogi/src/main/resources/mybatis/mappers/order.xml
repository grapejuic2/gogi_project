<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.order">

	<resultMap id="orderGoodsResult" type="orderVO">
		<result property="order_seq_num" column="order_seq_num" />
		<result property="order_id" column="order_id" />
		<result property="mem_id" column="mem_id" />
		<result property="goods_id" column="goods_id" />
		<result property="mem_name" column="mem_name" />
		<result property="goods_name" column="goods_name" />
		<result property="order_quantity" column="order_quantity" />
		<result property="goods_sales_price" column="goods_sales_price" />
		<result property="file_name" column="file_name" />
		<result property="order_rec_name" column="order_rec_name" />
		<result property="order_rec_hp1" column="order_rec_hp1" />
		<result property="order_rec_hp2" column="order_rec_hp2" />
		<result property="order_rec_hp3" column="order_rec_hp3" />
		<result property="order_rec_tel1" column="order_rec_tel1" />
		<result property="order_rec_tel2" column="order_rec_tel2" />
		<result property="order_rec_tel3" column="order_rec_tel3" />
		<result property="order_delivery_address" column="order_delivery_address" />
		<result property="order_delivery_method" column="order_delivery_method" />
		<result property="order_delivery_message" column="order_delivery_message" />
		<result property="order_delivery_option" column="order_delivery_option" />
		<result property="order_delivery_status" column="order_delivery_status" />
		<result property="order_pay_method" column="order_pay_method" />
		<result property="card_company_name" column="card_company_name" />
		<result property="card_pay_month" column="card_pay_month" />
		<result property="pay_orderer_hp_num" column="pay_orderer_hp_num" />
		<result property="order_pay_hp_payment_num" column="order_pay_hp_payment_num" />
		<result property="order_time" column="order_time" />
	</resultMap>
	
	<insert id="insertNewOrder" parameterType="orderVO">
		<!-- selectKey 사용하면 주문상품일련번호 주문테이블에 바로 추가할 수있음 -->
		<selectKey resultType="int" keyProperty="order_seq_num" order="BEFORE">
			select order_seq_num.nextval from dual
		</selectKey>
		<![CDATA[
			insert into gogi_order(order_seq_num,
			                            order_id,
										mem_id,
									    goods_id,
									    goods_name,
									    file_name,
									    order_quantity,
									    goods_sales_price,
									    mem_name,
									    ORDER_REC_NAME,
									    ORDER_REC_HP1,
					                    ORDER_REC_HP2,
					                    ORDER_REC_HP3,
					                    ORDER_DEILVERY_ADDRESS,
					                    ORDER_DELIVERY_MESSAGE,
						                ORDER_PAY_METHOD,
						                CARD_COMPANY_NAME,
						                CARD_PAY_MONTH,
						                ORDER_ORDERER_HP)
							     values(#{order_seq_num},
							            #{order_id},
									    #{mem_id},
									    #{goods_id},
									    #{goods_name},
									    #{file_name},
									    #{order_quantity},
									    #{goods_sales_price},
									    #{mem_name},
									    #{order_rec_name},
									    #{order_rec_hp1},
					                    #{order_rec_hp2},
					                    #{order_rec_hp2},
					                    #{order_delivery_address},
					                    #{order_delivery_message},
						                #{order_pay_method},
						                #{card_company_name},
						                #{card_pay_month},
						                #{pay_orderer_hp_num})								  
		]]>	
	</insert>
	
	<select id="selectOrderID" resultType="int">
		<![CDATA[
		select seq_order_id.nextval from dual
		]]>
	</select>
	

</mapper>